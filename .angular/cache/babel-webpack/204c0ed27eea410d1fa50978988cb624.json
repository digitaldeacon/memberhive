{"ast":null,"code":"import _taggedTemplateLiteral from \"/Applications/MAMP/htdocs/memberhive/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nimport _classCallCheck from \"/Applications/MAMP/htdocs/memberhive/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Applications/MAMP/htdocs/memberhive/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar _templateObject, _templateObject2, _templateObject3;\n\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { takeWhile, filter } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { getAuthError, isAuthLoading, isAuth, AuthenticateAction, ListPeopleAction, ListSettingAction, ListInteractionsAction, ListTagsAction, ListFamiliesAction } from '@memberhivex/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/flex-layout/flex\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/button\";\nimport * as i11 from \"@angular/material/progress-bar\";\nimport * as i12 from \"../common/components/notifybox/notifybox.component\";\n\nfunction LoginComponent_mat_progress_bar_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 16);\n  }\n}\n\nfunction LoginComponent_i_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 17);\n  }\n}\n\nfunction LoginComponent_mat_card_subtitle_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-subtitle\");\n    i0.ɵɵelement(1, \"mh-notifybox\", 18);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(2, 2, ctx_r2.error$))(\"type\", ctx_r2.error);\n  }\n}\n\nexport var LoginComponent = /*#__PURE__*/(function () {\n  var LoginComponent = /*#__PURE__*/function () {\n    function LoginComponent(_fb, _router, _store) {\n      var _this = this;\n\n      _classCallCheck(this, LoginComponent);\n\n      this._fb = _fb;\n      this._router = _router;\n      this._store = _store;\n      this.alive = true;\n      this.closeError = false;\n\n      this._store.select(isAuth).pipe(takeWhile(function () {\n        return _this.alive;\n      }), filter(function (authenticated) {\n        return authenticated;\n      })).subscribe(function (value) {\n        _this._store.dispatch(new ListPeopleAction({}));\n\n        _this._store.dispatch(new ListSettingAction());\n\n        _this._store.dispatch(new ListInteractionsAction({}));\n\n        _this._store.dispatch(new ListTagsAction({}));\n\n        _this._store.dispatch(new ListFamiliesAction({}));\n\n        _this.home();\n      });\n    }\n\n    _createClass(LoginComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.initForm();\n        this.error$ = this._store.select(getAuthError);\n        this.loading$ = this._store.select(isAuthLoading);\n      }\n    }, {\n      key: \"onKey\",\n      value: function onKey(event) {\n        if (event.key === 'Enter') {\n          this.submit();\n        }\n      }\n    }, {\n      key: \"initForm\",\n      value: function initForm() {\n        this.closeError = true;\n        this.form = this._fb.group({\n          username: ['', Validators.required],\n          password: ['', Validators.required]\n        });\n      }\n    }, {\n      key: \"submit\",\n      value: function submit() {\n        var username = this.form.get('username').value;\n        var password = this.form.get('password').value;\n        this.closeError = false;\n        username.trim();\n        password.trim();\n        var payload = {\n          username: username,\n          password: password\n        };\n\n        this._store.dispatch(new AuthenticateAction(payload));\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this.alive = false;\n      }\n    }, {\n      key: \"home\",\n      value: function home() {\n        this._router.navigate(['/dashboard']);\n      }\n    }]);\n\n    return LoginComponent;\n  }();\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Store));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"mh-login\"]],\n    decls: 24,\n    vars: 15,\n    consts: function consts() {\n      var i18n_0;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_login_username$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_LOGIN_LOGIN_COMPONENT_TS_1 = goog.getMsg(\"Email OR Username\");\n        i18n_0 = MSG_EXTERNAL_login_username$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_LOGIN_LOGIN_COMPONENT_TS_1;\n      } else {\n        i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([\":@@login.username\\u241F483f0e6a2350b798262ecc89bc81d4c1e5bfa2f7\\u241F8345321176100290148:Email OR Username\"])));\n      }\n\n      var i18n_2;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_form_password$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_LOGIN_LOGIN_COMPONENT_TS_3 = goog.getMsg(\"Password\");\n        i18n_2 = MSG_EXTERNAL_form_password$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_LOGIN_LOGIN_COMPONENT_TS_3;\n      } else {\n        i18n_2 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\":@@form.password\\u241Fc32ef07f8803a223a83ed17024b38e8d82292407\\u241F1431416938026210429:Password\"])));\n      }\n\n      var i18n_4;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_login_submit$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_LOGIN_LOGIN_COMPONENT_TS_5 = goog.getMsg(\" LOGIN \");\n        i18n_4 = MSG_EXTERNAL_login_submit$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_LOGIN_LOGIN_COMPONENT_TS_5;\n      } else {\n        i18n_4 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\":@@login.submit\\u241F54275d2cecdca111a83abf1f6df3862c70e00241\\u241F4249731140397169242: LOGIN \"])));\n      }\n\n      return [[\"fxLayoutAlign\", \"center center\", 1, \"login-container\"], [1, \"login-content\"], [\"mode\", \"indeterminate\", \"color\", \"accent\", 4, \"ngIf\"], [\"class\", \"loading-holder\", 4, \"ngIf\"], [\"fxLayout\", \"column\"], [\"mat-card-image\", \"\", 1, \"logo\"], [\"svgIcon\", \"assets:memberhive\"], [4, \"ngIf\"], [\"fxFlex\", \"\"], [\"novalidate\", \"\", \"fxLayout\", \"column\", \"autocomplete\", \"off\", 3, \"formGroup\", \"ngSubmit\"], [\"matPrefix\", \"\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", i18n_0, \"autocorrect\", \"off\", \"autocapitalize\", \"off\", \"spellcheck\", \"off\", \"formControlName\", \"username\", 3, \"keyup\", \"focus\"], [\"matInput\", \"\", \"type\", \"password\", \"placeholder\", i18n_2, \"autocomplete\", \"off\", \"autocorrect\", \"off\", \"autocapitalize\", \"off\", \"spellcheck\", \"off\", \"formControlName\", \"password\", 3, \"keyup\"], [\"fxLayout\", \"row\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", \"fxFlex\", \"\", 3, \"disabled\"], i18n_4, [\"mode\", \"indeterminate\", \"color\", \"accent\"], [1, \"loading-holder\"], [3, \"message\", \"type\"]];\n    },\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, LoginComponent_mat_progress_bar_2_Template, 1, 0, \"mat-progress-bar\", 2);\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵtemplate(4, LoginComponent_i_4_Template, 1, 0, \"i\", 3);\n        i0.ɵɵpipe(5, \"async\");\n        i0.ɵɵelementStart(6, \"mat-card\", 4);\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelement(8, \"mat-icon\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, LoginComponent_mat_card_subtitle_9_Template, 3, 4, \"mat-card-subtitle\", 7);\n        i0.ɵɵpipe(10, \"async\");\n        i0.ɵɵelementStart(11, \"mat-card-content\", 8);\n        i0.ɵɵelementStart(12, \"form\", 9);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_12_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(13, \"mat-form-field\");\n        i0.ɵɵelementStart(14, \"mat-icon\", 10);\n        i0.ɵɵtext(15, \"email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 11);\n        i0.ɵɵlistener(\"keyup\", function LoginComponent_Template_input_keyup_16_listener($event) {\n          return ctx.onKey($event);\n        })(\"focus\", function LoginComponent_Template_input_focus_16_listener() {\n          return ctx.initForm();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-form-field\");\n        i0.ɵɵelementStart(18, \"mat-icon\", 10);\n        i0.ɵɵtext(19, \"lock\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"input\", 12);\n        i0.ɵɵlistener(\"keyup\", function LoginComponent_Template_input_keyup_20_listener($event) {\n          return ctx.onKey($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 13);\n        i0.ɵɵelementStart(22, \"button\", 14);\n        i0.ɵɵi18n(23, 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 9, ctx.loading$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(5, 11, ctx.loading$));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 13, ctx.error$) && !ctx.closeError);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"invalid\", (ctx.form.controls.username == null ? null : ctx.form.controls.username.errors) && (ctx.form.controls.username == null ? null : ctx.form.controls.username.dirty));\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"invalid\", (ctx.form.controls.password == null ? null : ctx.form.controls.password.errors) && (ctx.form.controls.password == null ? null : ctx.form.controls.password.dirty));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n      }\n    },\n    directives: [i4.DefaultLayoutAlignDirective, i5.NgIf, i6.MatCard, i4.DefaultLayoutDirective, i6.MatCardImage, i7.MatIcon, i6.MatCardContent, i4.DefaultFlexDirective, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i8.MatFormField, i8.MatPrefix, i9.MatInput, i1.DefaultValueAccessor, i1.RequiredValidator, i1.NgControlStatus, i1.FormControlName, i10.MatButton, i11.MatProgressBar, i6.MatCardSubtitle, i12.NotifyboxComponent],\n    pipes: [i5.AsyncPipe],\n    styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]{}(function()[_ngcontent-%COMP%] {var __webpack_modules__ = ({666: (function() {throw new Error(\\\"Module build failed (from ./node_modules/@angular-devkit/build-angular/node_modules/postcss-loader/dist/cjs.js):nBrowserslistError: Unknown version 81 of androidn    at Function.select (/Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:1147:17)n    at /Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:341:33n    at Array.reduce (<anonymous>)n    at resolve (/Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:320:18)n    at browserslist (/Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:451:21)n    at Browsers.parse (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/browsers.js:63:12)n    at new Browsers (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/browsers.js:46:26)n    at loadPrefixes (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/autoprefixer.js:94:20)n    at plugin (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/autoprefixer.js:105:20)n    at /Applications/MAMP/htdocs/memberhive/node_modules/postcss-preset-env/index.js:443:157n    at async LazyResult.runAsync (/Applications/MAMP/htdocs/memberhive/node_modules/@angular-devkit/build-angular/node_modules/postcss/lib/lazy-result.js:396:11)n    at async Object.loader (/Applications/MAMP/htdocs/memberhive/node_modules/@angular-devkit/build-angular/node_modules/postcss-loader/dist/index.js:97:14)\\\");})}); var __webpack_exports__ = {}; __webpack_modules__[666](); resource = __webpack_exports__;})()[_ngcontent-%COMP%]{}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}