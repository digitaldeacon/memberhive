{"ast":null,"code":"import _taggedTemplateLiteral from \"/Applications/MAMP/htdocs/memberhive/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nimport _classCallCheck from \"/Applications/MAMP/htdocs/memberhive/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Applications/MAMP/htdocs/memberhive/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;\n\nimport { EventEmitter } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { getPeopleFilterSettings, SavePeopleFilterAction, PersistPeopleFilterAction, DeletePeopleFilterAction } from '@memberhivex/core';\nimport { Store } from '@ngrx/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@ngrx/store\";\nimport * as i3 from \"@angular/material/expansion\";\nimport * as i4 from \"@angular/flex-layout/flex\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/menu\";\nimport * as i10 from \"@angular/material/chips\";\nimport * as i11 from \"@angular/common\";\n\nfunction FilterComponent_mat_chip_31_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-chip\", 19);\n    i0.ɵɵlistener(\"click\", function FilterComponent_mat_chip_31_Template_mat_chip_click_0_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var filter_r3 = restoredCtx.$implicit;\n      var ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.setFilter(filter_r3, $event);\n    })(\"remove\", function FilterComponent_mat_chip_31_Template_mat_chip_remove_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var filter_r3 = restoredCtx.$implicit;\n      var ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.deleteFilter(filter_r3);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"mat-icon\", 20);\n    i0.ɵɵtext(3, \"cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var filter_r3 = ctx.$implicit;\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"color\", ctx_r2.highlightSelected(filter_r3))(\"selected\", ctx_r2.isSelectedFilter(filter_r3));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", filter_r3, \" \");\n  }\n}\n\nexport var FilterComponent = /*#__PURE__*/(function () {\n  var FilterComponent = /*#__PURE__*/function () {\n    function FilterComponent(_fb, _store) {\n      var _this = this;\n\n      _classCallCheck(this, FilterComponent);\n\n      this._fb = _fb;\n      this._store = _store;\n      this.filters = new EventEmitter();\n      this.hasFilter = false;\n      this.savedFilters = [];\n      this.form = this._fb.group({\n        filter: ['']\n      });\n\n      this._store.select(getPeopleFilterSettings).subscribe(function (filter) {\n        if (filter) {\n          if (filter.hasOwnProperty('saved') && filter.saved.length > 0) {\n            _this.savedFilters = filter.saved;\n          }\n\n          _this.form.get('filter').patchValue(filter.term);\n\n          _this.hasFilter = !!filter.term;\n        }\n      });\n    }\n\n    _createClass(FilterComponent, [{\n      key: \"filtering\",\n      value: function filtering() {\n        var _this2 = this;\n\n        this.filters.emit(this.activeFilter());\n        setTimeout(function () {\n          _this2._store.dispatch(new PersistPeopleFilterAction(_this2.activeFilter()));\n        }, 500);\n      } // persists the filter in memory accross pages\n\n    }, {\n      key: \"persistFilter\",\n      value: function persistFilter() {\n        this.filters.emit(this.activeFilter());\n\n        this._store.dispatch(new PersistPeopleFilterAction(this.activeFilter()));\n      } // saves the filter to the Db as a personal filter\n\n    }, {\n      key: \"saveFilter\",\n      value: function saveFilter() {\n        this._store.dispatch(new SavePeopleFilterAction(this.filterPayload()));\n      }\n    }, {\n      key: \"setFilter\",\n      value: function setFilter(filter, $event) {\n        var filterValue = this.activeFilter() !== filter ? filter : '';\n\n        if ($event.srcElement.tagName === 'MAT-CHIP') {\n          this.form.get('filter').patchValue(filterValue);\n          this.filters.emit(filterValue);\n\n          this._store.dispatch(new PersistPeopleFilterAction(filterValue));\n        }\n      }\n    }, {\n      key: \"deleteFilter\",\n      value: function deleteFilter(filter) {\n        this._store.dispatch(new DeletePeopleFilterAction(filter));\n\n        if (this.activeFilter() === filter) {\n          this.form.get('filter').patchValue('');\n        }\n      }\n    }, {\n      key: \"activeFilter\",\n      value: function activeFilter() {\n        return this.form.get('filter').value;\n      }\n    }, {\n      key: \"highlightSelected\",\n      value: function highlightSelected(filter) {\n        return this.isSelectedFilter(filter) ? 'accent' : 'default';\n      }\n    }, {\n      key: \"isSelectedFilter\",\n      value: function isSelectedFilter(filter) {\n        return this.activeFilter() === filter;\n      }\n    }, {\n      key: \"isSaveable\",\n      value: function isSaveable() {\n        var _this3 = this;\n\n        return this.activeFilter() ? this.savedFilters.some(function (term) {\n          return term === _this3.activeFilter();\n        }) : false;\n      }\n    }, {\n      key: \"filterPayload\",\n      value: function filterPayload() {\n        return {\n          term: this.activeFilter(),\n          saved: this.savedFilters\n        };\n      }\n    }]);\n\n    return FilterComponent;\n  }();\n\n  FilterComponent.ɵfac = function FilterComponent_Factory(t) {\n    return new (t || FilterComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Store));\n  };\n\n  FilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FilterComponent,\n    selectors: [[\"mh-filter\"]],\n    outputs: {\n      filters: \"filters\"\n    },\n    decls: 32,\n    vars: 5,\n    consts: function consts() {\n      var i18n_0;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_1 = goog.getMsg(\"Filter\");\n        i18n_0 = MSG_EXTERNAL_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_1;\n      } else {\n        i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([\":@@filter\\u241F5ca707824ab93066c7d9b44e1b8bf216725c2c22\\u241F8829497237648100098:Filter\"])));\n      }\n\n      var i18n_2;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_filter_add$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_3 = goog.getMsg(\"Search in name, surname and all tags\");\n        i18n_2 = MSG_EXTERNAL_filter_add$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_3;\n      } else {\n        i18n_2 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\":@@filter.add\\u241F07a291ed22bde1c82a1108a6f0512269ab0a2cd8\\u241F6894902585834100256:Search in name, surname and all tags\"])));\n      }\n\n      var i18n_4;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_hint_filter_terms$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_5 = goog.getMsg(\" Searches in name and status. Other Options are age:number (or number-number for range), gender:m (or f) \");\n        i18n_4 = MSG_EXTERNAL_hint_filter_terms$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_5;\n      } else {\n        i18n_4 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\":@@hint.filter.terms\\u241F62b4a49270dc0f6fa3e1d3e960736915f2bba5e9\\u241F7272609016852335930: Searches in name and status. Other Options are age:number (or number-number for range), gender:m (or f) \"])));\n      }\n\n      var i18n_6;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_btn_save_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_7 = goog.getMsg(\"Save Filter\");\n        i18n_6 = MSG_EXTERNAL_btn_save_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_7;\n      } else {\n        i18n_6 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\":@@btn.save.filter\\u241F408b9538671dd785cb86eee57be9b1e21b366a30\\u241F649593770442453014:Save Filter\"])));\n      }\n\n      var i18n_8;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_btn_export_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_9 = goog.getMsg(\"Export Filter\");\n        i18n_8 = MSG_EXTERNAL_btn_export_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_9;\n      } else {\n        i18n_8 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\":@@btn.export.filter\\u241Fdc978b0af50f172e9a99524f6b979be30bb54d9f\\u241F6417275554475248857:Export Filter\"])));\n      }\n\n      var i18n_10;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_btn_import_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_11 = goog.getMsg(\"Import\");\n        i18n_10 = MSG_EXTERNAL_btn_import_filter$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_11;\n      } else {\n        i18n_10 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\":@@btn.import.filter\\u241Fa059709f71aa4c0ac219e160e78a738682ca6a36\\u241F1071721880474488785:Import\"])));\n      }\n\n      var i18n_12;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        var MSG_EXTERNAL_filter_saved$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_13 = goog.getMsg(\"Saved Filters\");\n        i18n_12 = MSG_EXTERNAL_filter_saved$$____________APPLICATIONS_MAMP_HTDOCS_MEMBERHIVE_APPS_WEB_SRC_APP_COMMON_COMPONENTS_FILTER_FILTER_COMPONENT_TS_13;\n      } else {\n        i18n_12 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\":@@filter.saved\\u241Fdabb7691ea250b5bc8c3cb40c2b8521a62d565d8\\u241F2748326646698454391:Saved Filters\"])));\n      }\n\n      return [[3, \"expanded\"], [\"filterToolbar\", \"\"], i18n_0, [\"novalidate\", \"\", \"autocomplete\", \"off\", 3, \"formGroup\"], [\"fxLayout\", \"row\"], [\"fxFlex\", \"\"], [\"matPrefix\", \"\"], [\"matInput\", \"\", \"placeholder\", i18n_2, \"formControlName\", \"filter\", \"type\", \"search\", 3, \"keyup\", \"change\", \"keypress.enter\"], i18n_4, [\"mat-icon-button\", \"\", 3, \"matMenuTriggerFor\"], [\"saveMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"disabled\", \"click\"], i18n_6, [\"mat-menu-item\", \"\", \"disabled\", \"\"], i18n_8, i18n_10, [\"fxLayout\", \"column\", \"fxLayoutGap\", \"10px\"], i18n_12, [3, \"color\", \"selected\", \"click\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [3, \"color\", \"selected\", \"click\", \"remove\"], [\"matChipRemove\", \"\"]];\n    },\n    template: function FilterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-accordion\");\n        i0.ɵɵelementStart(1, \"mat-expansion-panel\", 0, 1);\n        i0.ɵɵelementStart(3, \"mat-expansion-panel-header\");\n        i0.ɵɵi18n(4, 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"form\", 3);\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"mat-form-field\", 5);\n        i0.ɵɵelementStart(8, \"mat-icon\", 6);\n        i0.ɵɵtext(9, \"search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 7);\n        i0.ɵɵlistener(\"keyup\", function FilterComponent_Template_input_keyup_10_listener() {\n          return ctx.filtering();\n        })(\"change\", function FilterComponent_Template_input_change_10_listener() {\n          return ctx.persistFilter();\n        })(\"keypress.enter\", function FilterComponent_Template_input_keypress_enter_10_listener() {\n          return ctx.filtering();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-hint\");\n        i0.ɵɵi18n(12, 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 9);\n        i0.ɵɵelementStart(14, \"mat-icon\");\n        i0.ɵɵtext(15, \"more_vert\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"mat-menu\", null, 10);\n        i0.ɵɵelementStart(18, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function FilterComponent_Template_button_click_18_listener() {\n          return ctx.saveFilter();\n        });\n        i0.ɵɵelementStart(19, \"span\");\n        i0.ɵɵi18n(20, 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 13);\n        i0.ɵɵelementStart(22, \"span\");\n        i0.ɵɵi18n(23, 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"button\", 13);\n        i0.ɵɵelementStart(25, \"span\");\n        i0.ɵɵi18n(26, 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 16);\n        i0.ɵɵelementStart(28, \"h5\", 5);\n        i0.ɵɵi18n(29, 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"mat-chip-list\");\n        i0.ɵɵtemplate(31, FilterComponent_mat_chip_31_Template, 4, 3, \"mat-chip\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        var _r1 = i0.ɵɵreference(17);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"expanded\", ctx.hasFilter);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"matMenuTriggerFor\", _r1);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.isSaveable());\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.savedFilters);\n      }\n    },\n    directives: [i3.MatAccordion, i3.MatExpansionPanel, i3.MatExpansionPanelHeader, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i4.DefaultLayoutDirective, i5.MatFormField, i4.DefaultFlexDirective, i6.MatIcon, i5.MatPrefix, i7.MatInput, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i5.MatHint, i8.MatButton, i9.MatMenuTrigger, i9.MatMenu, i9.MatMenuItem, i4.DefaultLayoutGapDirective, i10.MatChipList, i11.NgForOf, i10.MatChip, i10.MatChipRemove],\n    styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]{}(function()[_ngcontent-%COMP%] {var __webpack_modules__ = ({26: (function() {throw new Error(\\\"Module build failed (from ./node_modules/@angular-devkit/build-angular/node_modules/postcss-loader/dist/cjs.js):nBrowserslistError: Unknown version 81 of androidn    at Function.select (/Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:1147:17)n    at /Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:341:33n    at Array.reduce (<anonymous>)n    at resolve (/Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:320:18)n    at browserslist (/Applications/MAMP/htdocs/memberhive/node_modules/browserslist/index.js:451:21)n    at Browsers.parse (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/browsers.js:63:12)n    at new Browsers (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/browsers.js:46:26)n    at loadPrefixes (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/autoprefixer.js:94:20)n    at plugin (/Applications/MAMP/htdocs/memberhive/node_modules/autoprefixer/lib/autoprefixer.js:105:20)n    at /Applications/MAMP/htdocs/memberhive/node_modules/postcss-preset-env/index.js:443:157n    at async LazyResult.runAsync (/Applications/MAMP/htdocs/memberhive/node_modules/@angular-devkit/build-angular/node_modules/postcss/lib/lazy-result.js:396:11)n    at async Object.loader (/Applications/MAMP/htdocs/memberhive/node_modules/@angular-devkit/build-angular/node_modules/postcss-loader/dist/index.js:97:14)\\\");})}); var __webpack_exports__ = {}; __webpack_modules__[26](); resource = __webpack_exports__;})()[_ngcontent-%COMP%]{}\"],\n    changeDetection: 0\n  });\n  return FilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}